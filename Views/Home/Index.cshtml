@model List<Exercise>


<style>
    .modal {
        display: none;
        position: fixed; 
        z-index: 9999;
        left: 50%;
        top: 50%; 
        transform: translate(-50%, -50%); 
        width: 400px; 
        height: 400px; 
        background-color: #fff; 
        border-radius: 10px; 
        padding: 20px; 
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }

    .modal-content {
        position: relative; 
        height: 100%; 
    }

    .close {
        position: absolute; 
        top: 10px; 
        right: 10px; 
        cursor: pointer;
    }
</style>

<div class="container-fluid mt-5 ">
    <div id="fitnessModal" class="modal">
        <form asp-action="SaveUserFitnessLevel" asp-controller="Exercise" method="post">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 class="mb-4">Select Your Fitness Level</h2>
                <div class="form-group">
                    <!-- Styled dropdown -->
                    @Html.DropDownListFor(model => model.First().ExerciseCategory, new SelectList(Enum.GetValues(typeof(Instagram_Clone.Models.ExerciseCategory))), new { @class = "form-control mb-3", id = "exerciseCategoryDropdown" })
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
        
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="welcome-message p-4">
                <h1 class="display-3">Welcome to <span class="text-danger">FitZone!</span></h1>
                <p class="lead mt-4">Get ready to embark on an exciting fitness journey with FitZone. Whether you're looking to build muscle, lose weight, or improve your overall health, we've got you covered. Our comprehensive range of workouts, nutrition plans, and expert guidance will help you reach your fitness goals effectively. Let's make every sweat count!</p>
                <button class="btn btn-primary mt-3" id="changeFitnessLevelBtn">Adjust Fitness Level</button>

            </div>
        </div>
        <div class="col-lg-6">
            <img src="~/Images/AI_Generated_Image_2024-03-30_449516500002201.jpg" class="img-fluid rounded-3" style="object-fit:cover;" alt="Fitness Image">
        </div>

    </div>
    <div class="container-fluid mt-5">
        <h2 class="text-left mb-4">Exercises for you</h2> 
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mt-3">
            <!-- Adjusted margin top -->
            @foreach (var exercise in Model)
            {
                <div class="col">
                    <div class="card h-100 border-0 rounded-3 shadow">
                        <img src="@exercise.ExerciseImage" height="220px" style="object-fit:cover;" class="card-img-top" alt="@exercise.ExerciseName">
                        <div class="card-body">
                            <h5 class="card-title">@exercise.ExerciseName</h5>
                            <p class="card-text">
                                <strong>Time:</strong> @exercise.ExerciseTime<br>
                                <strong>Rest Between Exercises:</strong> @exercise.RestBetweenExercises<br>
                                <strong>Reps:</strong> @exercise.ExerciseReps
                            </p>
                            <a asp-action="ExerciseDetailsPage" asp-controller="Exercise" asp-route-ExerciseId="@exercise.Id" class="btn btn-primary">View Exercise</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>




</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var changeFitnessLevelBtn = document.getElementById("changeFitnessLevelBtn");
        var modal = document.getElementById("fitnessModal");
        var closeBtn = modal.querySelector(".close");

        // Check if the button should be disabled
        var lastClickedTime = localStorage.getItem("lastClickedTime");
        if (lastClickedTime) {
            var currentTime = new Date().getTime();
            var oneDay = 24 * 60 * 60 * 1000; // 1 day in milliseconds
            if (currentTime - parseInt(lastClickedTime) < oneDay) {
                changeFitnessLevelBtn.disabled = true;
            }
        }

        // Display modal when the button is clicked
        changeFitnessLevelBtn.addEventListener("click", function () {
            modal.style.display = "block";
            changeFitnessLevelBtn.disabled = true; // Disable the button when clicked
            localStorage.setItem("lastClickedTime", new Date().getTime().toString()); // Save the last clicked time
        });

        // Close modal when the close button is clicked
        closeBtn.addEventListener("click", function () {
            modal.style.display = "none";
        });

        // Remove "loggedIn" from localStorage when form is submitted
        var submitBtn = modal.querySelector(".btn-primary");
        submitBtn.onclick = function () {
            localStorage.removeItem("loggedIn");
        }
    });
</script>